Steps to Add new column in a table with existing data----
Alter Table Tablename Add column columnname columndatatype;
Alter table tablename DROP COLUMN ROW_HASH;

--Take existing row_hash from proc ddl and add new column name 
ALTER TABLE TABLE ADD COLUMN ROW_HASH VARCHAR AS SHA2(UPPER(ARRAY_TO_STRING([LOAN_NUMBER_NEW,LOAN_NUMBER_OLD,DISBURSEMENT_AMOUNT,NEW_DISBURSAL_NO,LOAN_AUTHOR_DATE,PRODUCT,SCHEME,PRODUCT_NHB,FIRST_DISBURSEMENT_DATE,CUSTOMER_TYPE,ASSET_CLASSIFICATION_IGAAP,ASSET_CLASSIFICATION_IND_AS,PROPERTY_STATE,BRANCH_STATE,TAGGING_OF_CANCELLED_CASES,LOAN_STATUS,GENDER,LOAN_PURPOSE,TRANSACTION_STRUCTURE,PROPERTY_IDENTIFIER,LOAN_AMOUNT,LOAN_TENURE_ORIGINAL,CARPET_AREA_OF_PROPERTY_SQ_MTRS,CRE_TAGGING,CRE_RH_TAGGING,CHARGES_DEDUCTED_AT_DISBURSEMENT,MONTHLY_INC_OF_BORROWERS_IN_LOAN,HL_BIFUR_OF_DISB_AMT,NHL_BIFUR_OF_DISB_AMT,TYPE_OF_LOAN, END_USE_FOR_MSME, TRANSACTION_EXECUTION_MODE, CREDIT_DECISION_IDENTIFIER, CASTE_CATEGORY,RURAL_URBAN,CUSTOMER_ID,LOAN_SANCTION_ROI,CURRENT_ROI], ''|'')), 256);

--To Rename column
Alter table tablename rename column old_column_name to  new_column_name;
Note - same update is required in row_hash as well so drop row_hash and update with new column name
---Sometime data type is not compatible
Steps to handle this scenario-
Rename old column
add new column 
Update new column values with old columns;
and drop and recreate rowhash

*********************************************************
SCD MART COLUMN ADDITION SAMPLE
*********************************************************
ALTER TABLE DISHA_L2_CURATED.BASE_MODEL_DATA.NET_CHARGES_test ADD COLUMN LOAN_AMOUNT FLOAT;
ALTER TABLE DISHA_L2_CURATED.BASE_MODEL_DATA.NET_CHARGES_test DROP COLUMN ROW_HASH ;
ALTER TABLE DISHA_L2_CURATED.BASE_MODEL_DATA.NET_CHARGES_test ADD COLUMN ROW_HASH VARCHAR(255) AS SHA2(UPPER(ARRAY_TO_STRING([OLD_LOAN_NUMBER ,NEW_LOAN_NUMBER ,ADMINISTRATIVE_FEES ,PROCESSING_FEES ,IMD_SFDC ,IMD_FC ,SERVICE_CHARGE_PDD ,BAJAJ_ALLIANZ_LIFE_INSURANCE ,BAJAJ_ALLIANZ_GENERAL_INSURANCE ,BHARTI_AXA_LIFE_INSURANCE ,CARE_PROTECTION_PLAN ,CERSAI_REGISTRATION_CHARGES ,EQUITABLE_MORTGAGE_FEES ,HDFC_LIFE_INSURANCE_COMPANY_LIMITED ,ICICI_LOMBARD_GENERAL_INSURANCE ,ICICI_PRUDENTIAL_LIFE_INSURANCE ,KOTAK_LIFE_INSURANCE ,RCU_CHARGES ,SHRIRAM_PROPERTY_INSURANCE ,STAMPING_CHARGES ,VALUATION_CHARGES ,LEGAL_CHARGES ,FUTURE_GENERALI_INSURANCE ,ICICI_LOMBARD_GIC_LIMITED ,ODV_CHARGES ,AF_PF_SCPDD_SUM_INC_IMD ,TECH_LEGAL_SUM ,FIRST_DISBURSAL_DATE ,LOAN_STATUS,LOAN_AMOUNT], '|')), 256) ;
